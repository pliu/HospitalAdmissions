# Design

## MVC
Rails is a MVC framework written in Ruby. Some of the
important paths are as follows:

    Controllers: ./app/controllers/
    Models: ./app/models/
    Views: ./app/views
    Routes: ./config/routes.rb
    Schema: ./db/schema.rb
    Seeds: ./db/seeds.rb
    
Controllers fetch/store data according to the specified
business logic. They are the layer between models and views,
making sure data flows as expected between models and views
(grabs the correct data from models to display in views and
puts data entered into views into the correct format to
write back to models).

Models are an abstraction on top of the actual data storage
layer (e.g.: MySQL). They are essentially Ruby objects that
represent the stored data, simplifying manipulation. As
objects, they also have numerous helper methods for querying
the correct object from the data store and for saving any
updates back to the store. Furthermore, relationships are
captured in models, further increasing their usefulness
(e.g.: a has_many and belongs_to relationship as declared in
their respective models allows entities of one model to
access entities of the related model as though they were
composed objects).

Views are the graphical interface exposed to the user. These
take the data generated by the controllers and display them
for the user to interact with.

Routes determines which paths route to which controllers and
methods contained therein.

Schema contains an overview of all of the tables contained in
our store as well as any other properties (e.g.: indices).

Seeds contains the initial models that we seed our store with
(e.g.: initial users, divisions, etc.).

## Validation
We have input validation at multiple levels as demonstrated
below.

### View validation
Simple validation can be performed in the view before any
communication overhead is even incurred and we do so. Examples
include checking that the e-mail field looks like a valid
e-mail (i.e.: using a regex <x>@<y>.<z>).

### Controller validation
The majority of business logic resides in the controllers.
It is within the controllers that we ensure that only
authorized users are able to access various functionalities
as per the requirements.

### Model validation
We add model validation to ensure certain fields exist prior
to creating a model object (and subsequently storing it).
This is a good way to check for mandatory fields.
Additionally, some fields have additional sanity checks at
this level, such as ensuring that the number of beds
available in a divison is greater than 0 or that a phone
number must be 10 characters long.

### Database constraints/triggers
We further constrain data at the database level as well
(e.g.: mandatory fields be non-nullable). Additionally, to
maintain consistency, we have also implemented triggers to
perform conditional updates that are a consequence of other
operations (e.g.: setting the status of a division to full
or available as admissions are created and deleted).
